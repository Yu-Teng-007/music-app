# ğŸ¨ å‰ç«¯æ¶æ„æ–‡æ¡£

**æ¡†æ¶ç‰ˆæœ¬**: Vue 3.5.13  
**æ„å»ºå·¥å…·**: Vite  
**å¼€å‘è¯­è¨€**: TypeScript  
**çŠ¶æ€ç®¡ç†**: Pinia  
**æ›´æ–°æ—¥æœŸ**: 2025-06-27

---

## ğŸ“‹ å‰ç«¯æ¶æ„æ¦‚è§ˆ

éŸ³ä¹åº”ç”¨å‰ç«¯é‡‡ç”¨ç°ä»£åŒ–çš„Vue 3ç”Ÿæ€ç³»ç»Ÿï¼Œä½¿ç”¨ç»„åˆå¼APIå’ŒTypeScriptæ„å»ºï¼Œæä¾›å“åº”å¼è®¾è®¡å’Œä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒã€‚

### ğŸ—ï¸ æŠ€æœ¯æ ˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è§†å›¾å±‚ (Vue)  â”‚    â”‚  çŠ¶æ€å±‚ (Pinia) â”‚    â”‚  æœåŠ¡å±‚ (API)   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Vue 3         â”‚â—„â”€â”€â–ºâ”‚ â€¢ Auth Store    â”‚â—„â”€â”€â–ºâ”‚ â€¢ HTTP Client   â”‚
â”‚ â€¢ TypeScript    â”‚    â”‚ â€¢ Music Store   â”‚    â”‚ â€¢ WebSocket     â”‚
â”‚ â€¢ Composition   â”‚    â”‚ â€¢ UI Store      â”‚    â”‚ â€¢ Error Handler â”‚
â”‚ â€¢ SFC           â”‚    â”‚ â€¢ Cache Store   â”‚    â”‚ â€¢ Interceptors  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è·¯ç”±å±‚        â”‚    â”‚   å·¥å…·å±‚        â”‚    â”‚   æ„å»ºå±‚        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Vue Router    â”‚    â”‚ â€¢ Utils         â”‚    â”‚ â€¢ Vite          â”‚
â”‚ â€¢ Guards        â”‚    â”‚ â€¢ Formatters    â”‚    â”‚ â€¢ TypeScript    â”‚
â”‚ â€¢ Meta          â”‚    â”‚ â€¢ Validators    â”‚    â”‚ â€¢ ESLint        â”‚
â”‚ â€¢ Transitions   â”‚    â”‚ â€¢ Constants     â”‚    â”‚ â€¢ Prettier      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/              # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                 # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.vue      # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Input.vue       # è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Modal.vue       # æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Loading.vue     # åŠ è½½ç»„ä»¶
â”‚   â”œâ”€â”€ layout/             # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.vue      # é¡µé¢å¤´éƒ¨
â”‚   â”‚   â”œâ”€â”€ Sidebar.vue     # ä¾§è¾¹æ 
â”‚   â”‚   â””â”€â”€ Footer.vue      # é¡µé¢åº•éƒ¨
â”‚   â”œâ”€â”€ music/              # éŸ³ä¹ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AudioPlayer.vue # éŸ³é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ MiniPlayer.vue  # è¿·ä½ æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ PlaylistCard.vue# æ­Œå•å¡ç‰‡
â”‚   â”‚   â””â”€â”€ SongItem.vue    # æ­Œæ›²é¡¹
â”‚   â””â”€â”€ common/             # é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ ErrorBoundary.vue   # é”™è¯¯è¾¹ç•Œ
â”‚       â”œâ”€â”€ BottomNavigation.vue# åº•éƒ¨å¯¼èˆª
â”‚       â””â”€â”€ SearchBar.vue       # æœç´¢æ 
â”œâ”€â”€ views/                  # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ HomeView.vue        # é¦–é¡µ
â”‚   â”œâ”€â”€ DiscoverView.vue    # å‘ç°é¡µ
â”‚   â”œâ”€â”€ PlayerView.vue      # æ’­æ”¾å™¨é¡µ
â”‚   â”œâ”€â”€ PlaylistView.vue    # æ­Œå•é¡µ
â”‚   â”œâ”€â”€ ProfileView.vue     # ä¸ªäººèµ„æ–™é¡µ
â”‚   â”œâ”€â”€ AuthView.vue        # è®¤è¯é¡µ
â”‚   â””â”€â”€ SettingsView.vue    # è®¾ç½®é¡µ
â”œâ”€â”€ stores/                 # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ music.ts           # éŸ³ä¹æ’­æ”¾çŠ¶æ€
â”‚   â”œâ”€â”€ ui.ts              # UIçŠ¶æ€
â”‚   â””â”€â”€ cache.ts           # ç¼“å­˜çŠ¶æ€
â”œâ”€â”€ services/              # APIæœåŠ¡å±‚
â”‚   â”œâ”€â”€ http.ts            # HTTPå®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ auth-api.ts        # è®¤è¯API
â”‚   â”œâ”€â”€ music-api.ts       # éŸ³ä¹API
â”‚   â”œâ”€â”€ realtime.ts        # WebSocketæœåŠ¡
â”‚   â””â”€â”€ ErrorService.ts    # é”™è¯¯å¤„ç†æœåŠ¡
â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.ts           # è·¯ç”±ä¸»é…ç½®
â”‚   â”œâ”€â”€ guards.ts          # è·¯ç”±å®ˆå«
â”‚   â””â”€â”€ routes.ts          # è·¯ç”±å®šä¹‰
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ formatters.ts      # æ ¼å¼åŒ–å·¥å…·
â”‚   â”œâ”€â”€ validators.ts      # éªŒè¯å·¥å…·
â”‚   â”œâ”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ storage.ts         # æœ¬åœ°å­˜å‚¨å·¥å…·
â”‚   â””â”€â”€ helpers.ts         # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ assets/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ images/            # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ icons/             # å›¾æ ‡èµ„æº
â”œâ”€â”€ types/                 # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ api.ts             # APIç±»å‹
â”‚   â”œâ”€â”€ music.ts           # éŸ³ä¹ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ user.ts            # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ common.ts          # é€šç”¨ç±»å‹
â””â”€â”€ main.ts                # åº”ç”¨å…¥å£æ–‡ä»¶
```

---

## ğŸ§© æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 1. éŸ³é¢‘æ’­æ”¾å™¨ (AudioPlayer)

å…¨å±€éŸ³é¢‘æ’­æ”¾å™¨ç»„ä»¶ï¼Œè´Ÿè´£éŸ³ä¹æ’­æ”¾æ§åˆ¶ã€‚

**åŠŸèƒ½ç‰¹æ€§**:
- éŸ³é¢‘æ’­æ”¾/æš‚åœæ§åˆ¶
- è¿›åº¦æ¡æ‹–æ‹½è·³è½¬
- éŸ³é‡æ§åˆ¶
- æ’­æ”¾æ¨¡å¼åˆ‡æ¢
- æ­Œè¯æ˜¾ç¤º

**ç»„ä»¶æ¥å£**:
```typescript
interface AudioPlayerProps {
  autoplay?: boolean
  volume?: number
  showLyrics?: boolean
}

interface AudioPlayerEmits {
  play: (song: Song) => void
  pause: () => void
  ended: () => void
  timeupdate: (currentTime: number) => void
}
```

### 2. è¿·ä½ æ’­æ”¾å™¨ (MiniPlayer)

é¡µé¢åº•éƒ¨çš„è¿·ä½ æ’­æ”¾å™¨ç»„ä»¶ã€‚

**åŠŸèƒ½ç‰¹æ€§**:
- å½“å‰æ’­æ”¾æ­Œæ›²ä¿¡æ¯æ˜¾ç¤º
- åŸºç¡€æ’­æ”¾æ§åˆ¶
- ç‚¹å‡»è·³è½¬åˆ°å®Œæ•´æ’­æ”¾å™¨
- æ’­æ”¾è¿›åº¦æ˜¾ç¤º

### 3. æ­Œå•å¡ç‰‡ (PlaylistCard)

æ­Œå•å±•ç¤ºå¡ç‰‡ç»„ä»¶ã€‚

**åŠŸèƒ½ç‰¹æ€§**:
- æ­Œå•å°é¢æ˜¾ç¤º
- æ­Œå•åŸºæœ¬ä¿¡æ¯
- æ’­æ”¾æŒ‰é’®
- æ”¶è—/åˆ†äº«åŠŸèƒ½

### 4. åº•éƒ¨å¯¼èˆª (BottomNavigation)

ç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆªæ ç»„ä»¶ã€‚

**åŠŸèƒ½ç‰¹æ€§**:
- ä¸»è¦é¡µé¢å¯¼èˆª
- å½“å‰é¡µé¢é«˜äº®
- å“åº”å¼è®¾è®¡
- å›¾æ ‡å’Œæ–‡å­—æ˜¾ç¤º

---

## ğŸ—ºï¸ è·¯ç”±æ¶æ„

### è·¯ç”±é…ç½®

```typescript
const routes: RouteRecordRaw[] = [
  // å¼•å¯¼é¡µé¢
  {
    path: '/onboarding',
    name: 'onboarding',
    component: () => import('@/views/OnboardingView.vue'),
    meta: { requiresGuest: true, hideNavigation: true }
  },
  
  // ä¸»è¦é¡µé¢
  {
    path: '/',
    name: 'home',
    component: HomeView
  },
  {
    path: '/discover',
    name: 'discover',
    component: () => import('@/views/DiscoverView.vue')
  },
  {
    path: '/playlist',
    name: 'playlist',
    component: () => import('@/views/PlaylistView.vue'),
    meta: { requiresAuth: true }
  },
  
  // è®¤è¯ç›¸å…³
  {
    path: '/auth',
    name: 'auth',
    component: () => import('@/views/AuthView.vue'),
    meta: { requiresGuest: true }
  },
  
  // åŠ¨æ€è·¯ç”±
  {
    path: '/playlist/:id',
    name: 'playlist-detail',
    component: () => import('@/views/PlaylistDetailView.vue'),
    props: true
  }
]
```

### è·¯ç”±å®ˆå«

```typescript
router.beforeEach(async (to, from, next) => {
  const authStore = useAuthStore()
  
  // æ£€æŸ¥é¦–æ¬¡å¯åŠ¨
  if (to.name !== 'onboarding' && isFirstLaunch()) {
    next('/onboarding')
    return
  }
  
  // æ£€æŸ¥è®¤è¯è¦æ±‚
  if (to.meta.requiresAuth && !authStore.isAuthenticated) {
    next({ path: '/auth', query: { redirect: to.fullPath } })
    return
  }
  
  // æ£€æŸ¥æ¸¸å®¢è¦æ±‚
  if (to.meta.requiresGuest && authStore.isAuthenticated) {
    next('/')
    return
  }
  
  next()
})
```

### è·¯ç”±å…ƒä¿¡æ¯

```typescript
interface RouteMeta {
  requiresAuth?: boolean      // éœ€è¦ç™»å½•
  requiresGuest?: boolean     // éœ€è¦æœªç™»å½•
  hideNavigation?: boolean    // éšè—å¯¼èˆª
  title?: string             // é¡µé¢æ ‡é¢˜
  keepAlive?: boolean        // ç»„ä»¶ç¼“å­˜
}
```

---

## ğŸª çŠ¶æ€ç®¡ç† (Pinia)

### 1. è®¤è¯çŠ¶æ€ (Auth Store)

ç®¡ç†ç”¨æˆ·è®¤è¯ç›¸å…³çŠ¶æ€ã€‚

```typescript
export const useAuthStore = defineStore('auth', () => {
  // çŠ¶æ€
  const user = ref<User | null>(null)
  const token = ref<string | null>(null)
  const isLoading = ref(false)
  
  // è®¡ç®—å±æ€§
  const isAuthenticated = computed(() => !!user.value && !!token.value)
  const userInitials = computed(() => {
    if (user.value?.username) {
      return user.value.username.slice(0, 2).toUpperCase()
    }
    return 'ç”¨æˆ·'
  })
  
  // æ–¹æ³•
  const login = async (credentials: LoginCredentials) => {
    isLoading.value = true
    try {
      const response = await authApi.login(credentials)
      user.value = response.user
      token.value = response.token
      localStorage.setItem('auth_token', response.token)
    } finally {
      isLoading.value = false
    }
  }
  
  const logout = () => {
    user.value = null
    token.value = null
    localStorage.removeItem('auth_token')
  }
  
  return {
    user, token, isLoading,
    isAuthenticated, userInitials,
    login, logout
  }
})
```

### 2. éŸ³ä¹çŠ¶æ€ (Music Store)

ç®¡ç†éŸ³ä¹æ’­æ”¾ç›¸å…³çŠ¶æ€ã€‚

```typescript
export const useMusicStore = defineStore('music', () => {
  // æ’­æ”¾çŠ¶æ€
  const currentSong = ref<Song | null>(null)
  const playlist = ref<Song[]>([])
  const isPlaying = ref(false)
  const currentTime = ref(0)
  const duration = ref(0)
  const volume = ref(0.8)
  
  // æ’­æ”¾æ¨¡å¼
  const playMode = ref<PlayMode>({
    shuffle: false,
    repeat: 'none'
  })
  
  // è®¡ç®—å±æ€§
  const progress = computed(() => {
    return duration.value > 0 ? (currentTime.value / duration.value) * 100 : 0
  })
  
  const formattedCurrentTime = computed(() => formatTime(currentTime.value))
  const formattedDuration = computed(() => formatTime(duration.value))
  
  // æ’­æ”¾æ§åˆ¶æ–¹æ³•
  const play = (song?: Song) => {
    if (song) {
      currentSong.value = song
    }
    isPlaying.value = true
  }
  
  const pause = () => {
    isPlaying.value = false
  }
  
  const next = () => {
    const currentIndex = playlist.value.findIndex(s => s.id === currentSong.value?.id)
    if (currentIndex < playlist.value.length - 1) {
      play(playlist.value[currentIndex + 1])
    }
  }
  
  return {
    currentSong, playlist, isPlaying, currentTime, duration, volume, playMode,
    progress, formattedCurrentTime, formattedDuration,
    play, pause, next
  }
})
```

### 3. UIçŠ¶æ€ (UI Store)

ç®¡ç†ç•Œé¢ç›¸å…³çŠ¶æ€ã€‚

```typescript
export const useUIStore = defineStore('ui', () => {
  // ç•Œé¢çŠ¶æ€
  const theme = ref<'light' | 'dark'>('light')
  const sidebarOpen = ref(false)
  const loading = ref(false)
  const notifications = ref<Notification[]>([])
  
  // æ–¹æ³•
  const toggleTheme = () => {
    theme.value = theme.value === 'light' ? 'dark' : 'light'
    localStorage.setItem('theme', theme.value)
  }
  
  const showNotification = (notification: Notification) => {
    notifications.value.push({
      ...notification,
      id: Date.now().toString()
    })
  }
  
  return {
    theme, sidebarOpen, loading, notifications,
    toggleTheme, showNotification
  }
})
```

---

## ğŸŒ APIæœåŠ¡å±‚

### HTTPå®¢æˆ·ç«¯é…ç½®

```typescript
export const apiClient: AxiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000/api',
  timeout: 5000,
  headers: {
    'Content-Type': 'application/json'
  },
  withCredentials: true
})

// è¯·æ±‚æ‹¦æˆªå™¨
apiClient.interceptors.request.use(
  (config) => {
    const authStore = useAuthStore()
    if (authStore.token) {
      config.headers.Authorization = `Bearer ${authStore.token}`
    }
    return config
  },
  (error) => Promise.reject(error)
)

// å“åº”æ‹¦æˆªå™¨
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      const authStore = useAuthStore()
      authStore.logout()
      router.push('/auth')
    }
    return Promise.reject(error)
  }
)
```

### APIæœåŠ¡æ¨¡å—

```typescript
// éŸ³ä¹APIæœåŠ¡
export const musicApi = {
  async getSongs(params?: SongQueryParams) {
    const response = await apiClient.get('/songs', { params })
    return response.data.data
  },
  
  async getSong(id: string) {
    const response = await apiClient.get(`/songs/${id}`)
    return response.data.data
  },
  
  async searchSongs(query: string) {
    const response = await apiClient.get('/songs/search', {
      params: { q: query }
    })
    return response.data.data
  }
}
```

### WebSocketæœåŠ¡

```typescript
class RealtimeService {
  private socket: Socket | null = null
  
  connect(token: string, serverUrl: string) {
    this.socket = io(serverUrl, {
      auth: { token },
      transports: ['websocket']
    })
    
    this.socket.on('connect', () => {
      console.log('WebSocketè¿æ¥æˆåŠŸ')
    })
    
    this.socket.on('notification', (data) => {
      const uiStore = useUIStore()
      uiStore.showNotification(data)
    })
  }
  
  disconnect() {
    if (this.socket) {
      this.socket.disconnect()
      this.socket = null
    }
  }
}

export const realtimeService = new RealtimeService()
```

---

## ğŸ¨ æ ·å¼æ¶æ„

### CSSæ¶æ„

```scss
// å˜é‡å®šä¹‰
:root {
  // é¢œè‰²ç³»ç»Ÿ
  --color-primary: #3b82f6;
  --color-secondary: #64748b;
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  
  // é—´è·ç³»ç»Ÿ
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  
  // å­—ä½“ç³»ç»Ÿ
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
}

// å“åº”å¼æ–­ç‚¹
@media (max-width: 768px) {
  .container {
    padding: var(--spacing-sm);
  }
}
```

### ç»„ä»¶æ ·å¼è§„èŒƒ

```vue
<template>
  <div class="music-card">
    <img :src="song.coverUrl" class="music-card__cover" />
    <div class="music-card__content">
      <h3 class="music-card__title">{{ song.title }}</h3>
      <p class="music-card__artist">{{ song.artist }}</p>
    </div>
  </div>
</template>

<style scoped>
.music-card {
  @apply bg-white rounded-lg shadow-md overflow-hidden;
  transition: transform 0.2s ease;
}

.music-card:hover {
  @apply transform scale-105;
}

.music-card__cover {
  @apply w-full h-48 object-cover;
}

.music-card__content {
  @apply p-4;
}

.music-card__title {
  @apply text-lg font-semibold text-gray-900 mb-1;
}

.music-card__artist {
  @apply text-sm text-gray-600;
}
</style>
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ

```typescript
export const breakpoints = {
  xs: '0px',
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
  '2xl': '1536px'
}
```

### å“åº”å¼ç»„ä»¶

```vue
<template>
  <div class="responsive-grid">
    <div 
      v-for="song in songs" 
      :key="song.id"
      class="grid-item"
    >
      <SongCard :song="song" />
    </div>
  </div>
</template>

<style scoped>
.responsive-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
}

@media (max-width: 640px) {
  .responsive-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 0.5rem;
  }
}
</style>
```

---

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### Viteé…ç½®

```typescript
export default defineConfig({
  plugins: [vue(), vueJsx()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  server: {
    port: 5188,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true
      }
    }
  },
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vue-vendor': ['vue', 'vue-router', 'pinia'],
          'ui-vendor': ['lucide-vue-next'],
          'utils-vendor': ['axios', 'socket.io-client']
        }
      }
    }
  }
})
```

### TypeScripté…ç½®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "jsx": "preserve",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "esModuleInterop": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,
    "noEmit": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²

```typescript
// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
const routes = [
  {
    path: '/discover',
    component: () => import('@/views/DiscoverView.vue')
  }
]

// ç»„ä»¶çº§åˆ«çš„ä»£ç åˆ†å‰²
const LazyComponent = defineAsyncComponent(() => import('@/components/HeavyComponent.vue'))
```

### å›¾ç‰‡ä¼˜åŒ–

```vue
<template>
  <img 
    :src="optimizedImageUrl"
    :loading="lazy"
    v-img-fallback="fallbackImage"
    @error="handleImageError"
  />
</template>

<script setup>
const optimizedImageUrl = computed(() => {
  if (!props.src) return fallbackImage
  
  // æ ¹æ®è®¾å¤‡åƒç´ æ¯”å’Œå±å¹•å°ºå¯¸ä¼˜åŒ–å›¾ç‰‡
  const dpr = window.devicePixelRatio || 1
  const width = Math.round(props.width * dpr)
  
  return `${props.src}?w=${width}&q=80&f=webp`
})
</script>
```

### ç¼“å­˜ç­–ç•¥

```typescript
// ç»„ä»¶ç¼“å­˜
<router-view v-slot="{ Component }">
  <keep-alive :include="cachedComponents">
    <component :is="Component" />
  </keep-alive>
</router-view>

// APIç¼“å­˜
const cache = new Map()

export const cachedApiCall = async (key: string, apiCall: () => Promise<any>) => {
  if (cache.has(key)) {
    return cache.get(key)
  }
  
  const result = await apiCall()
  cache.set(key, result)
  
  // 5åˆ†é’Ÿåæ¸…é™¤ç¼“å­˜
  setTimeout(() => cache.delete(key), 5 * 60 * 1000)
  
  return result
}
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```typescript
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import SongCard from '@/components/SongCard.vue'

describe('SongCard', () => {
  it('renders song information correctly', () => {
    const song = {
      id: '1',
      title: 'Test Song',
      artist: 'Test Artist',
      coverUrl: 'test.jpg'
    }
    
    const wrapper = mount(SongCard, {
      props: { song }
    })
    
    expect(wrapper.text()).toContain('Test Song')
    expect(wrapper.text()).toContain('Test Artist')
  })
})
```

### E2Eæµ‹è¯•

```typescript
import { test, expect } from '@playwright/test'

test('user can play a song', async ({ page }) => {
  await page.goto('/')
  await page.click('[data-testid="song-item"]:first-child')
  await page.click('[data-testid="play-button"]')
  
  await expect(page.locator('[data-testid="mini-player"]')).toBeVisible()
  await expect(page.locator('[data-testid="play-pause-button"]')).toHaveAttribute('aria-label', 'Pause')
})
```

---

*æœ¬æ–‡æ¡£éšå‰ç«¯æ¶æ„æ¼”è¿›æŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨æœ€æ–°ç‰ˆæœ¬ã€‚*
