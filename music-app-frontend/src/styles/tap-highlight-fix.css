/* 
 * 全局点击高亮修复样式
 * 解决移动端和桌面端点击后保留背景色和高亮的问题
 */

/* ===== 全局重置 ===== */

/* 重置所有可交互元素的默认点击高亮 */
*,
*::before,
*::after {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* ===== 按钮样式修复 ===== */

/* 全局按钮重置 - 确保所有按钮都没有点击保留效果 */
button,
[role="button"],
.btn,
.button {
  /* 移除默认样式 */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  
  /* 移除点击高亮 */
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  
  /* 确保outline正确重置 */
  outline: none;
  
  /* 防止点击状态保留 */
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

/* 确保按钮的focus状态在点击后立即清除 */
button:focus:not(:focus-visible),
[role="button"]:focus:not(:focus-visible),
.btn:focus:not(:focus-visible),
.button:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* 移动端专用：确保active状态不会保留 */
@media (hover: none) {
  button:active,
  [role="button"]:active,
  .btn:active,
  .button:active {
    transform: none !important;
    background-color: inherit;
    opacity: 0.8;
    transition: opacity 0.1s ease;
  }
  
  /* 点击后立即恢复 */
  button:not(:active),
  [role="button"]:not(:active),
  .btn:not(:active),
  .button:not(:active) {
    opacity: 1;
    transition: opacity 0.1s ease;
  }
}

/* ===== 链接样式修复 ===== */

/* 全局链接重置 */
a,
a:link,
a:visited {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  outline: none;
}

/* 移动端链接点击效果 */
@media (hover: none) {
  a:active {
    opacity: 0.7;
    transition: opacity 0.1s ease;
  }
  
  a:not(:active) {
    opacity: 1;
    transition: opacity 0.1s ease;
  }
  
  /* 确保focus状态在移动端不显示 */
  a:focus {
    outline: none;
    background-color: transparent !important;
  }
}

/* ===== 输入框样式修复 ===== */

/* 输入框focus状态优化 */
input,
textarea,
select {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* 移动端输入框优化 */
@media (hover: none) {
  input:focus,
  textarea:focus,
  select:focus {
    /* 保持必要的focus样式，但移除不必要的高亮 */
    -webkit-tap-highlight-color: transparent;
  }
}

/* ===== 可点击元素修复 ===== */

/* 所有可点击元素的通用修复 */
[onclick],
[tabindex]:not([tabindex="-1"]),
.clickable,
.interactive {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  outline: none;
}

/* 移动端可点击元素优化 */
@media (hover: none) {
  [onclick]:active,
  [tabindex]:not([tabindex="-1"]):active,
  .clickable:active,
  .interactive:active {
    opacity: 0.7;
    transition: opacity 0.1s ease;
  }
  
  [onclick]:not(:active),
  [tabindex]:not([tabindex="-1"]):not(:active),
  .clickable:not(:active),
  .interactive:not(:active) {
    opacity: 1;
    transition: opacity 0.1s ease;
  }
}

/* ===== 特殊组件修复 ===== */

/* 导航项修复 */
.nav-item,
.navigation-item,
.menu-item {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  outline: none;
}

/* 卡片类组件修复 */
.card,
.item,
.list-item {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* ===== 辅助类 ===== */

/* 完全禁用点击效果的辅助类 */
.no-tap-highlight {
  -webkit-tap-highlight-color: transparent !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  outline: none !important;
}

/* 允许轻微点击反馈的辅助类 */
.subtle-tap-feedback {
  -webkit-tap-highlight-color: transparent;
  transition: opacity 0.1s ease;
}

@media (hover: none) {
  .subtle-tap-feedback:active {
    opacity: 0.8;
  }
}

/* ===== 性能优化 ===== */

/* 为频繁交互的元素启用硬件加速 */
.gpu-accelerated,
button,
a,
[role="button"] {
  transform: translateZ(0);
  will-change: transform, opacity;
}

/* 减少重绘的优化 */
@media (hover: none) {
  * {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}
